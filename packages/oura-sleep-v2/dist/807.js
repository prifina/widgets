"use strict";(self.webpackChunk_prifina_widgets_oura_sleep_v2=self.webpackChunk_prifina_widgets_oura_sleep_v2||[]).push([[807],{4807:(M,e,D)=>{D.r(e);var t=D(7900),N=D.n(t),g=D(4149),j=D(2734);const a="cECGHdLTCpjaimqviz7N2s";var z=D(9996),I=D(6827),u=D(8703),c=D(8445),i=D(6656),r=D(3258),n=D(4912),A=D(5484),y=D(5556),l=D(3131),o=D(2655),L=D(2418);const T=g.ZP.div`
  height: 300px;
  width: 300px;
  border-radius: 10px;
  background: linear-gradient(180deg, #343434 0%, #d3bc69 149.83%);
  padding: 11px 8px 0px 8px;
`,E=M=>{const{stage:e,check:D,onUpdate:g,API:E,registerDataConnector:S}=(0,j.usePrifina)(),[x,s]=(0,t.useState)({}),O=(0,t.useRef)();console.log("processed data",x);const d=async M=>{console.log("UPDATE ",M),M.hasOwnProperty("data")&&M.data.hasOwnProperty("content")&&console.log("PAYLOAD DATA",M)},[U,k]=(0,t.useState)(1),[w,m]=(0,t.useState)();return(0,t.useEffect)((()=>{O.current||async function(){g(a,d),S(a,[z.Z]),O.current=!0}()}),[]),(0,t.useEffect)((()=>{!async function(){let M=new Date;const e=M.setDate(M.getDate()-U),D=(M=>[M.getFullYear(),(M.getMonth()+1).toString().padStart(2,"0"),M.getDate().toString().padStart(2,"0")].join("-"))(new Date(e));m(D),console.log("datestr",D);const t={"s3::date":{[j.Op.eq]:D}};console.log("FILTER",t);const N=await E[a].Oura.querySleepData({filter:t,fields:"summary_date,awake,light,deep,rem,total"});console.log("THE NEW BUILD result",N),(M=>{console.log("ORIGINAL PROCESS DATA",M);let e=[M];console.log("newData",e),s(e)})(N.data.getDataObject.content)}()}),[U]),console.log("day",U),N().createElement(T,null,N().createElement(I.kC,{alignItems:"center",mb:21},N().createElement(I.xv,{fontSize:16,color:"white",fontWeight:700,ml:9,mr:110},"Sleep widget"),N().createElement(u.Ee,{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAzOCAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuODc1IDEuMjU0MjdDMi44NzUgMS43MDM5OCAzLjQgMS44MTY0MSA1LjMxMjUgMS44MTY0MUM3LjIyNSAxLjgxNjQxIDcuNzUgMS43MDM5OCA3Ljc1IDEuMjU0MjdDNy43NSAwLjgwNDU1NiA3LjIyNSAwLjY5MjEyOCA1LjMxMjUgMC42OTIxMjhDMy40IDAuNjkyMTI4IDIuODc1IDAuODA0NTU2IDIuODc1IDEuMjU0MjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMi44MDAzNyAzLjUzOTc5Qy0wLjA4NzEzNDggNS4wNzYzMSAtMC4wMTIxMzQ4IDkuODczMjMgMi44NzUzNyAxMS4zNzIzQzQuMzAwMzcgMTIuMTIxOCA2Ljc3NTM3IDEyLjA4NDMgNy45NzUzNyAxMS4zMzQ4QzEwLjcxMjkgOS40OTg0NyAxMC42MDA0IDQuOTYzODggNy43NTAzNyAzLjUwMjMyQzYuMzYyODcgMi43OTAyNyA0LjExMjg3IDIuNzkwMjcgMi44MDAzNyAzLjUzOTc5Wk03LjAwMDM3IDQuMjUxODNDOC4zNTAzNyA0Ljk2Mzg4IDguODc1MzcgNS44NjMzIDguODc1MzcgNy41MTIyNEM4Ljg3NTM3IDkuMDg2MjMgOC4xMjUzNyAxMC4yMTA1IDYuNjYyODcgMTAuODEwMUM0LjMzNzg3IDExLjc0NyAxLjc1MDM3IDEwLjA2MDYgMS43NTAzNyA3LjYyNDY3QzEuNzUwMzcgNS45MDA3OCAyLjIzNzg3IDQuOTYzODggMy41NTAzNyA0LjI4OTMxQzQuODYyODcgMy41NzcyNyA1LjY1MDM3IDMuNTM5NzkgNy4wMDAzNyA0LjI1MTgzWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjc1IDUuNTYzNjZDMTAuNzUgMTAuMDYwOCAxMi4wNjI1IDExLjkzNDYgMTUuMjUgMTEuOTM0NkMxNi42NzUgMTEuOTM0NiAxNy4xNjI1IDExLjc0NzIgMTguMDI1IDEwLjg0NzhDMTkgOS44MzU5MiAxOS4xMTI1IDkuNDIzNjggMTkuMyA2LjM1MDY2QzE5LjQ1IDMuMzUyNTggMTkuNDEyNSAyLjk0MDM0IDE4Ljg1IDIuOTQwMzRDMTguMzYyNSAyLjk0MDM0IDE4LjI1IDMuMzkwMDYgMTguMjUgNS43NTEwNEMxOC4yNSA4Ljg5OTAyIDE3LjggMTAuMTczMiAxNi40ODc1IDEwLjc3MjhDMTUuMDI1IDExLjQ0NzQgMTQuMTI1IDExLjI2IDEyLjk2MjUgMTAuMDk4MkMxMS45NSA5LjA0ODkyIDExLjg3NSA4LjgyNDA3IDExLjg3NSA1Ljk3NTlDMTEuODc1IDMuNTM5OTYgMTEuNzYyNSAyLjk0MDM0IDExLjMxMjUgMi45NDAzNEMxMC44NjI1IDIuOTQwMzQgMTAuNzUgMy40NjUwMSAxMC43NSA1LjU2MzY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTIwLjEyNSA3LjQzNzQ2QzIwLjEyNSAxMS4xODUxIDIwLjIzNzUgMTEuOTM0NiAyMC42ODc1IDExLjkzNDZDMjEuMSAxMS45MzQ2IDIxLjI1IDExLjQ4NDkgMjEuMjUgMTAuMDYwOFY4LjE4Njk4SDIyLjkzNzVDMjQuNTg3NSA4LjE4Njk4IDI0LjY2MjUgOC4yNjE5MyAyNS42NzUgMTAuMDYwOEMyNi4yMzc1IDExLjA3MjYgMjYuOTEyNSAxMS45MzQ2IDI3LjE3NSAxMS45MzQ2QzI3LjgxMjUgMTEuOTM0NiAyNy43NzUgMTEuNzQ3MiAyNi42NSA5LjgzNTkyTDI1LjY3NSA4LjE4Njk4TDI2LjQ2MjUgNy41MTI0MUMyNy43Mzc1IDYuNDI1NjEgMjcuODUgNS4wMDE1MiAyNi43MjUgMy45MTQ3MkMyNS45IDMuMDUyNzcgMjUuNDg3NSAyLjk0MDM0IDIyLjkzNzUgMi45NDAzNEgyMC4xMjVWNy40Mzc0NlpNMjUuNjc1IDQuMjg5NDhDMjYuNTc1IDQuOTI2NTcgMjYuNzYyNSA1LjkwMDk0IDI2LjA1IDYuNjEyOTlDMjUuNzg3NSA2Ljg3NTMyIDI0LjYyNSA3LjA2MjcgMjMuNDI1IDcuMDYyN0gyMS4yNVY1LjM3NjI4VjMuNjg5ODZIMjMuMDVDMjQuMDYyNSAzLjY4OTg2IDI1LjE4NzUgMy45NTIyIDI1LjY3NSA0LjI4OTQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMwLjQzNzYgNy4xMzc1OEMyOS40MjUxIDkuNDIzNjEgMjguNTI1MSAxMS40NDczIDI4LjQ1MDEgMTEuNjM0N0MyOC4zNzUxIDExLjc4NDYgMjguNTYyNiAxMS45MzQ1IDI4Ljg2MjYgMTEuOTM0NUMyOS4xNjI2IDExLjkzNDUgMjkuNjEyNiAxMS40NDczIDI5Ljg3NTEgMTAuODEwMkMzMC4zMjUxIDkuNzIzNDIgMzAuNDAwMSA5LjY4NTk0IDMyLjg3NTEgOS42ODU5NEMzNS4zNTAxIDkuNjg1OTQgMzUuNDI1MSA5LjcyMzQyIDM1Ljg3NTEgMTAuODEwMkMzNi4xMzc2IDExLjQ0NzMgMzYuNTg3NiAxMS45MzQ1IDM2Ljg4NzYgMTEuOTM0NUMzNy41MjUxIDExLjkzNDUgMzcuNjM3NiAxMi4zMDkzIDM1LjMxMjYgNy4xMDAxQzM0LjE1MDEgNC41MTQyNyAzMy4yMTI2IDIuOTQwMjggMzIuODc1MSAyLjk0MDI4QzMyLjUzNzYgMi45NDAyOCAzMS42MDAxIDQuNTE0MjcgMzAuNDM3NiA3LjEzNzU4Wk0zMy45MjUxIDYuNDI1NTRDMzQuMzc1MSA3LjUxMjM0IDM0Ljc1MDEgOC41MjQxOSAzNC43NTAxIDguNjc0MDlDMzQuNzUwMSA4LjgyNCAzMy45MjUxIDguOTM2NDMgMzIuODc1MSA4LjkzNjQzQzMxLjg2MjYgOC45MzY0MyAzMS4wMDAxIDguODI0IDMxLjAwMDEgOC42NzQwOUMzMS4wMDAxIDguMTQ5NDMgMzIuNjUwMSA0LjQzOTMxIDMyLjg3NTEgNC40MzkzMUMzMi45ODc2IDQuNDM5MzEgMzMuNDc1MSA1LjMzODc0IDMzLjkyNTEgNi40MjU1NFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="})),N().createElement(I.xu,null,N().createElement(I.kC,{h:32,justifyContent:"space-between",alignItems:"center",bg:"#FFA654",padding:"0px 65px 0px 65px",borderTopRightRadius:8,borderTopLeftRadius:8},N().createElement(c.hU,{style:{background:"transparent",border:0,cursor:"pointer",fontSize:19},"aria-label":"Search database",icon:N().createElement(i.wy,null),onClick:async()=>{k(U+1)}}),N().createElement(I.xv,null,w),N().createElement(c.hU,{disabled:1===U,style:{background:"transparent",border:0,cursor:"pointer",fontSize:19},"aria-label":"Search database",icon:N().createElement(i.XC,null),onClick:async()=>{k(U-1)}})),N().createElement(I.xu,{height:202,style:{background:"rgba(251, 242, 242, 0.3)",borderBottomLeftRadius:10,borderBottomRightRadius:10}},N().createElement(r.h,{width:"100%",height:"100%"},N().createElement(n.v,{width:200,height:202,data:x,margin:{top:20,right:30,left:0,bottom:0},style:{cursor:"pointer"}},N().createElement(A.q,{strokeDasharray:"none",vertical:!1,stroke:"rgba(0, 0, 0, 0.12)"}),N().createElement(y.K,{tickLine:!1,dataKey:"0",stroke:"rgba(0, 0, 0, 0.12)",label:{value:"STAGES",position:"bottom",offset:-20,stroke:"white",fontSize:10}}),N().createElement(l.B,{axisLine:!1,tickLine:!1,label:{value:"HOURS ASLEEP",angle:-90,stroke:"white",fontSize:10},allowDecimals:!1,type:"number",tickFormatter:M=>Math.floor(M/3600),domain:[0,"dataMax + 3600"],stroke:"white",dataKey:"total"}),N().createElement(o.u,{cursor:{fill:"transparent"},contentStyle:{background:"rgba(0, 0, 0, 0.9)",padding:5,border:0},itemStyle:{fontSize:14},formatter:M=>{return D=(e=M)%3600,Math.floor(e/3600)+"h "+Math.floor(D/60)+"m";var e,D}}),N().createElement(L.$,{barSize:45,name:"Total sleep",dataKey:"total",fill:"#FFE9D5"}),N().createElement(L.$,{barSize:45,name:"Awake",dataKey:"awake",fill:"#f3f3c2"}),N().createElement(L.$,{barSize:45,name:"Light",dataKey:"light",fill:"#FFA654"}),N().createElement(L.$,{barSize:45,name:"Deep",dataKey:"deep",fill:"#B96314"}),N().createElement(L.$,{barSize:45,name:"REM",dataKey:"rem",fill:"#6D3D10"}))))))};E.displayName="OuraSleep";const S=E;var x=D(953);const s=document.getElementById("root");(0,x.createRoot)(s).render(N().createElement(S,null))}}]);