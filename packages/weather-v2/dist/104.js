"use strict";(self.webpackChunk_prifina_widgets_weather_v2=self.webpackChunk_prifina_widgets_weather_v2||[]).push([[104],{3104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var c=n(7900),o=n.n(c),a=n(101),r=n(2734),i=n(6262),l=n(6827),s=n(1506),d=n(7956),g=n(7284),u=n(3528),m=n(3987),f=n(2230);const h={width:"300px",height:"300px",borderRadius:"10px",boxShadow:"0px 2px 8px rgba(91, 92, 91, 0.2)",paddingTop:31,flexDirection:"column",justifyContent:"space-between"},E=e=>{console.log("WEATHER WIDGET PROPS ",e);const[t,n]=(0,c.useState)(!0),{city:E,data:p}=e,{onUpdate:x}=(0,r.usePrifina)();let w=E;void 0!==p&&p.hasOwnProperty("settings")&&"object"==typeof p.settings&&p.settings.hasOwnProperty("city")&&p.settings.city.length>0&&(w=p.settings.city);const[y,D]=(0,c.useState)(w),C=e=>{console.log("WEATHER WIDGET UPDATE CALLBACK ",e),e.hasOwnProperty("settings")&&"object"==typeof e.settings&&e.settings.hasOwnProperty("city")&&(D(e.settings.city),b(`${i.C}/v1/forecast.json?key=${i.$}&q=${e.settings.city}&days=3&aqi=no&alerts=no`))};(0,c.useEffect)((()=>{x(f.A,C)}),[]);const{weatherData:S,error:A,isLoading:k,setUrl:b}=(0,a.Z)(`${i.C}/v1/forecast.json?key=${i.$}&q=${y}&days=3&aqi=no&alerts=no`);if(A)return o().createElement("h2",null,"Error when fetching: ",A);if(!S&&k)return o().createElement("h2",null,"LOADING...");if(!S)return null;const v=S.current.condition.text,I=S.current.is_day,_=S.location.localtime;new Date(_).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});const W=I<1?"linear-gradient(180deg, #2B5876 0%, #4E4376 100%)":"linear-gradient(180deg, #A9E8FC 0%, #2774D2 100%)",z=I<1?"linear-gradient(180deg, #A6BED0 0%, #1C242C 100%)":" linear-gradient(180deg, #C4E0E5 0%, #58A8C5 30.73%, #2571A4 88.54%)",O=I<1?"linear-gradient(180deg, #223548 16.17%, #166293 100%)":"linear-gradient(180deg, #D2DEEA 0%, #00416A 100%)",T=I<1?"linear-gradient(180deg, #808080 0%, #191654 100%)":"linear-gradient(180deg, #F2FCFE 0%, #1C92D2 100%)",L=S.current.condition.code;console.log("CONDITION CODE",L);let R=(0,m.H)(L),$=W;switch(L){case 1e3:case 1003:case 1006:default:$=W;break;case 1009:case 1063:case 1192:case 1183:case 1186:case 1189:case 1153:case 1195:$=z;break;case 1273:case 1246:case 1276:case 1087:case 1279:case 1282:$=O;break;case 1030:case 1066:case 1069:case 1072:case 1114:case 1117:case 1135:case 1147:case 1150:case 1168:case 1171:case 1180:case 1198:case 1201:case 1204:case 1207:case 1210:case 1213:case 1216:case 1219:case 1222:case 1225:case 1237:case 1240:case 1243:case 1249:case 1252:case 1255:case 1258:case 1261:case 1264:$=T}return I<1&&(R=(0,m.$)(L)),o().createElement(d.xjn,{resetCSS:!1},!1===k&&o().createElement(l.kC,{alt:"container",style:h,flex:1,bg:$},(()=>{if(A)return o().createElement("h2",null,"Error when fetching: ",A);if(!S&&k)return o().createElement("h2",null,"LOADING...");if(!S)return null;console.log("WEATHER DATA",S);const e=S.current.temp_c,t=S.location.name,n=1e3*S.location.localtime_epoch,c=new Date(n).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return console.log(c),o().createElement(l.kC,null,o().createElement(l.kC,{paddingLeft:"20px",paddingRight:"17px"},o().createElement(s.Ee,{src:R,boxSize:"100px"})),o().createElement(l.kC,{flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},o().createElement(l.kC,{alt:"location",justifyContent:"center"},o().createElement(g._t,null),o().createElement(l.xv,{fontSize:"14px",fontWeight:"400",color:"white"},t)),o().createElement(l.kC,{alt:"location",alignItems:"baseline"},o().createElement(l.xv,{paddingRight:"3px",fontWeight:"600",fontSize:"24px",color:"white"},Math.round(e),"°"),o().createElement(l.xv,{fontWeight:"600",fontSize:"16px",color:"white"},v)),o().createElement(l.xv,{fontSize:"14px",fontWeight:"400",color:"white"},c)))})(),(()=>{if(A)return o().createElement("h2",null,"Error when fetching: ",A);if(!S&&k)return o().createElement("h2",null,"LOADING...");if(!S)return null;console.log("WEATHER DATA",S);const e=S.location.localtime;let c=new Date(e).getHours();console.log("sdadsasda",c);const a=[...S.forecast.forecastday[0].hour,...S.forecast.forecastday[1].hour],r=a.slice(c,c+6),i=a.slice(c+6,c+12);console.log("HOUR DATA",a),console.log("SIX HOUR DATA",r),console.log("SIX HOUR 2 DATA",i);const d=t?r:i;return t?o().createElement(l.kC,{paddingLeft:"41px",paddingRight:"20px",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},d.map((function(e,t){const n=1===I?(0,m.H)(e.condition.code):(0,m.$)(e.condition.code),c=new Date(e.time).toLocaleString("en-US",{hour:"numeric",hour12:!0});return o().createElement(l.kC,{key:"data-"+t,flexDirection:"column",alignItems:"center"},o().createElement(l.xv,{fontSize:"10px",fontWeight:"600",color:"white"},c),o().createElement(s.Ee,{src:n,boxSize:"22px"}),o().createElement(l.xv,{key:t,fontSize:"12px",fontWeight:"600",color:"white"},Math.round(e.temp_c)))})),o().createElement("div",{onClick:()=>n(!t)},o().createElement(g._Q,null))):o().createElement(l.kC,{paddingLeft:"20px",paddingRight:"20px",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},o().createElement("div",{onClick:()=>n(!t)},o().createElement(g.s$,null)),d.map((function(e,t){const n=1===I?(0,m.H)(e.condition.code):(0,m.$)(e.condition.code),c=new Date(e.time).toLocaleString("en-US",{hour:"numeric",hour12:!0});return o().createElement(l.kC,{key:"wdata-"+t,flexDirection:"column",alignItems:"center"},o().createElement(l.xv,{fontSize:"10px",fontWeight:"600",color:"white"},c),o().createElement(s.Ee,{src:n,boxSize:"22px"}),o().createElement(l.xv,{key:t,fontSize:"12px",fontWeight:"600",color:"white"},Math.round(e.temp_c)))})),o().createElement("div",null,o().createElement(g._Q,null)))})(),(()=>{if(A)return o().createElement("h2",null,"Error when fetching: ",A);if(!S&&k)return o().createElement("h2",null,"LOADING...");if(!S)return null;const e=S.forecast.forecastday,t=e[1].date,n=e[2].date,c=(new Date(t),new Date(n)),a=u.a[c.getDay()],r=new Date(t),i=new Date(n),d=r.getDate(),g=u.e[r.getMonth()],f=i.getDate(),h=u.e[i.getMonth()];console.log("Three day DATA",e);const E=1===I?(0,m.H)(e[1].day.condition.code):(0,m.$)(e[1].day.condition.code),p=1===I?(0,m.H)(e[2].day.condition.code):(0,m.$)(e[2].day.condition.code);console.log("ICON",E),console.log("IS LOADING",k);const x=e[1].day.mintemp_c,w=e[1].day.maxtemp_c,y=e[2].day.mintemp_c,D=e[2].day.maxtemp_c;return o().createElement(l.kC,{paddingLeft:"20px",paddingRight:"20px",marginBottom:"28px",justifyContent:"space-between"},o().createElement(l.kC,{flexDirection:"column"},o().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},"Tomorrow, ",d," ",g),o().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},a,", ",f," ",h)),o().createElement(l.kC,{alignItems:"center",justifyContent:"space-between",flexDirection:"column"},o().createElement(s.Ee,{src:p,boxSize:"22px"}),o().createElement(s.Ee,{src:E,boxSize:"22px"})),o().createElement(l.kC,{alignItems:"center",justifyContent:"space-between",flexDirection:"column"},o().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},Math.round(x),"°/ ",Math.round(w),"°"),o().createElement(l.xv,{fontSize:"14px",fontWeight:"600",color:"white"},Math.round(y),"°/ ",Math.round(D),"°")))})()))};E.defaultProps={city:"San Francisco"},E.displayName="Weather";const p=E}}]);